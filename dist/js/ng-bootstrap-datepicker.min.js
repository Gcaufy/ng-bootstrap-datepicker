!function(e){var t=angular.module("ngDatepicker",[]);t.version="1.0.0";var a={OPTION_PREFIX:"ng-dp-option-",EVENT_PREFIX:"ng-dp-event-",defaults:{format:"M d, yyyy",autoclose:!0},parseAttr:function(e){var t,a=e.split("-"),n=a.length,r=a[0];for(t=1;n>t;t++)r+=a[t].substr(0,1).toUpperCase()+a[t].substr(1);return r}};if(!$.fn.datepicker)throw"Datepicker Required";Date.prototype.format=function(e,t){return $.fn.datepicker.DPGlobal.formatDate(new Date(Date.UTC(this.getFullYear(),this.getMonth(),this.getDate())),e||a.defaults.format,t||"en")},$.fn.datepicker.DPGlobal.template=$.fn.datepicker.DPGlobal.template.replace('<div class="datepicker">','<div class="datepicker ng-datepicker">').replace("&#171;","<").replace("&#187;",">").replace("&#171;","<").replace("&#187;",">").replace("&#171;","<").replace("&#187;",">"),t.directive("ngDatepicker",function(e,t){return{restrict:"AE",replace:!0,scope:{ngDpModel:"="},template:function(e,t){return t.ngDpInline?'<div class="ng-datepicker datepicker"></div>':'<div class="ng-datepicker-input"><input type="text" ng-model="ngDpModel" readonly="readonly"></div>'},link:function(e,n,r){var p,l={},o={},i=null,d=null,c=null,u=!1,D=!0,g=!!r.ngDpInline,s=!!r.ngDpRangeMode,f=[],k="week"===r.ngDpView,h=null,m=r.ngDpDefault,y=r.ngDpRangeTarget?r.ngDpRangeTarget:null,v=null,E=r.$attr;E.ngDpLoad&&r.ngDpLoad&&(h=r.ngDpLoad,delete E.ngDpLoad,delete r.ngDpLoad);for(p in E)0===E[p].indexOf(a.OPTION_PREFIX)&&(l[a.parseAttr(E[p].substr(a.OPTION_PREFIX.length))]=r[p]),0===E[p].indexOf(a.EVENT_PREFIX)&&(o[a.parseAttr(E[p].substr(a.EVENT_PREFIX.length))]=r[p]);r.id&&n.attr("id",r.id),l.startDate&&"today"===l.startDate&&(l.startDate=new Date),l.endDate&&"today"===l.endDate&&(l.endDate=new Date),d=g?n:n.find("input"),c=$.extend({},a.defaults,l);for(v in c)"false"===c[v]&&(c[v]=!1),"true"===c[v]&&(c[v]=!0);s&&(c.forceParse=!1,c.autoclose=!1),i=d.datepicker(c),n.attr("required")&&(n.removeAttr("required"),d.attr("required",!0),t(n)(e)),r.ngDpElement&&(e.$parent[r.ngDpElement]=i),h&&"function"==typeof e.$parent[h]&&e.$parent[h].call(i),i.callMethod=function(){D=!1,i.datepicker.apply(i,arguments)},e.ngDpElem=i,k&&i.on("changeDate",function(e){if(!D)return void(D=!0);var t=[],a=e.date,n=a.getDay(),r=864e5,p=0,l=new Date(a.getTime()-n*r);for(t.push(l);++p<7;)t.push(new Date(l.getTime()+p*r));u=!0,D=!1,i.datepicker("setDates",t)}),g?i.on("changeDate",function(t){u=!0,e.ngDpModel=i.datepicker("getFormattedDate"),e.$root.$$phase||e.$apply()}):n.find(".add-on").click(function(){i.datepicker("show")}),y&&i.on("changeDate",function(t){e.$parent[y].datepicker("setStartDate",t.date)}),s&&i.on("changeDate",function(t){var a=null;return D?(2===f.length&&(f=[]),f.push($.fn.datepicker.Constructor.prototype._local_to_utc(t.date).valueOf()),a=2===f.length&&f[1]>f[0]?f:null,D=!1,i.datepicker("setRange",a),i.datepicker("setDate",t.date),void(a?(e.ngDpModel=new Date(a[0]).format()+" - "+new Date(a[1]).format(),e.$apply(),setTimeout(function(){i.datepicker("hide"),d.blur()},300)):2===f.length&&(f=[f[1]]))):(D=!0,!1)});for(p in o)i.on(p,function(t){return function(a){D?(!k||k&&a.dates.length>1)&&e.$parent[t].call(n,a):D=!0}}(o[p]));m&&("today"===m?e.ngDpModel=(new Date).format("M d, yyyy"):e.ngDpModel=m),e.$watch("ngDpModel",function(e){e&&(u||s||(D=!1,i.datepicker("setDate",e)),u=!1)})}}})}();